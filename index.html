<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Image Generator ‚Äì Pins</title>
<style>
  :root{
    --bg1:#0ea5e9; --bg2:#8b5cf6; --ink:#0f172a; --card:#ffffff;
    --accent:#2563eb; --accent2:#22c55e; --muted:#64748b;
  }
  *{box-sizing:border-box} html,body{margin:0}
  body{
    font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
    background: linear-gradient(120deg,var(--bg1),var(--bg2));
    min-height:100vh; color:#0b1220; display:flex; flex-direction:column;
  }
  /* Header */
  header{
    backdrop-filter:saturate(140%) blur(8px);
    background:rgba(255,255,255,.12);
    border-bottom:1px solid rgba(255,255,255,.25);
    color:#fff; padding:18px 20px; text-align:center;
  }
  header h1{margin:0; font-weight:800; letter-spacing:.3px}
  header p{margin:6px 0 0; opacity:.9}
  /* Controls */
  .controls{
    margin:22px auto 14px; width:min(980px,92%);
    display:grid; grid-template-columns:1fr auto auto; gap:10px;
  }
  .controls form{display:contents}
  .searchInput{
    padding:14px 16px; border-radius:14px; border:1px solid rgba(0,0,0,.06);
    background:#fff; outline:none; font-size:16px; box-shadow:0 8px 26px rgba(0,0,0,.08);
  }
  .btn{
    border:0; padding:14px 18px; border-radius:14px; font-weight:700; cursor:pointer;
    color:#fff; box-shadow:0 10px 24px rgba(0,0,0,.12); transition:transform .15s ease, filter .15s ease;
  }
  .btn:hover{transform:translateY(-1px); filter:brightness(1.05)}
  .btn:active{transform:translateY(0)}
  .btn-primary{background:linear-gradient(135deg,#2563eb,#7c3aed)}
  .btn-green{background:linear-gradient(135deg,#22c55e,#16a34a)}
  .btn-ghost{
    background:rgba(255,255,255,.18); color:#fff; border:1px solid rgba(255,255,255,.35);
    backdrop-filter: blur(6px);
  }
  .hidden-input{display:none}
  label[for="uploadInput"]{display:inline-block}

  /* Grid */
  .wrap{width:min(1200px,94%); margin:6px auto 28px; flex:1}
  #pinContainer{
    display:grid; gap:18px;
    grid-template-columns: repeat(auto-fill, minmax(220px,1fr));
  }
  .pin{
    background:var(--card); border-radius:18px; overflow:hidden;
    box-shadow:0 16px 40px rgba(2,6,23,.18); position:relative; isolation:isolate;
    transition:transform .18s ease, box-shadow .18s ease;
  }
  .pin:hover{transform:translateY(-4px); box-shadow:0 22px 60px rgba(2,6,23,.22)}
  .pin img{display:block; width:100%; height:100%; object-fit:cover}
  .pin .badge{
    position:absolute; top:10px; left:10px; font-size:12px; font-weight:700;
    padding:6px 10px; border-radius:999px; background:rgba(0,0,0,.55); color:#fff
  }
  .pin .pin-btn{
    position:absolute; right:10px; top:10px; border:0; border-radius:999px; cursor:pointer;
    padding:8px 12px; font-weight:800; color:#fff; background:linear-gradient(135deg,#ef4444,#f97316);
    box-shadow:0 8px 22px rgba(0,0,0,.25); transition:transform .15s ease
  }
  .pin .pin-btn:hover{transform:scale(1.05)}

  /* Modal */
  .modal{
    position:fixed; inset:0; background:rgba(2,6,23,.55); display:none; place-items:center; z-index:40;
  }
  .modal .card{
    width:min(520px,92%); background:#0b1220; color:#e5e7eb; border:1px solid #1f2937;
    border-radius:18px; padding:20px; box-shadow:0 30px 80px rgba(0,0,0,.45);
  }
  .card h3{margin:0 0 12px; color:#fff}
  .row{display:flex; gap:8px}
  .row input{
    flex:1; padding:12px 14px; border-radius:12px; border:1px solid #334155; background:#111827; color:#e5e7eb
  }
  .row .btn{padding:12px 16px}
  .close{float:right; background:transparent; border:0; color:#cbd5e1; font-weight:800; cursor:pointer}
  .helper{margin-top:10px; color:#94a3b8; font-size:13px}

  /* Footer */
  footer{
    text-align:center; color:#e5e7eb; padding:18px;
    backdrop-filter:saturate(140%) blur(8px);
    background:rgba(255,255,255,.1); border-top:1px solid rgba(255,255,255,.25);
  }

  /* Empty state */
  .empty{color:#fff; text-align:center; opacity:.9; margin:40px 0}
</style>
</head>
<body>

<header>
  <h1>Image Generator ‚Äì Pins</h1>
  <p>Search, pin by URL, or upload your own. No API key needed.</p>
</header>

<section class="controls">
  <form id="searchForm">
    <input id="searchInput" class="searchInput" placeholder="Try: mountains, cars, food, anime, space..." />
  </form>
  <button form="searchForm" type="submit" class="btn btn-primary" id="searchButton">Search</button>
  <div class="row" style="gap:10px">
    <button id="addPinButton" class="btn btn-ghost">+ Add URL</button>
    <label for="uploadInput" class="btn btn-green">Upload</label>
    <input id="uploadInput" class="hidden-input" type="file" accept="image/*" />
  </div>
</section>

<main class="wrap">
  <div id="pinContainer"></div>
  <div id="emptyState" class="empty">Type a keyword above and hit <b>Search</b> to load images.</div>
</main>

<!-- URL Modal -->
<div id="addPinModal" class="modal">
  <div class="card">
    <button class="close" title="Close">&times;</button>
    <h3>Add Image by URL</h3>
    <form id="addPin">
      <div class="row" style="margin-bottom:10px">
        <input id="pinUrlInput" placeholder="Paste any image URL (jpg, png, webp, etc.)" />
        <button class="btn btn-primary" type="submit">Add</button>
      </div>
    </form>
    <div class="helper">Tip: right‚Äìclick any image on the web ‚Üí ‚ÄúCopy Image Address‚Äù, then paste here.</div>
  </div>
</div>

<footer>¬© 2025 Image Generator ‚Ä¢ All Rights Reserved</footer>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const addPinButton = document.getElementById('addPinButton');
  const addPinModal  = document.getElementById('addPinModal');
  const closeBtn     = addPinModal.querySelector(".close");
  const addPinForm   = document.getElementById('addPin');
  const pinContainer = document.getElementById('pinContainer');
  const searchForm   = document.getElementById('searchForm');
  const searchInput  = document.getElementById('searchInput');
  const uploadInput  = document.getElementById('uploadInput');
  const emptyState   = document.getElementById('emptyState');

  // ---------- UI Helpers ----------
  function showModal(){ addPinModal.style.display = "grid"; }
  function hideModal(){ addPinModal.style.display = "none"; }
  function clearGrid(){ pinContainer.innerHTML = ""; }
  function hideEmpty(){ emptyState.style.display = "none"; }
  function showEmpty(){ emptyState.style.display = "block"; }

  // Add a pin card
  function addPin(url, label="PIN"){
    const card = document.createElement('div');
    card.className = 'pin';
    const img = document.createElement('img');
    img.loading = "lazy";
    img.decoding = "async";
    img.src = url;

    // Fallback to Picsum if an image fails
    img.onerror = () => {
      const seed = Math.random().toString(36).slice(2);
      img.src = `https://picsum.photos/seed/${seed}/600/800`;
    };

    const badge = document.createElement('div');
    badge.className = 'badge';
    badge.textContent = label;

    const pinBtn = document.createElement('button');
    pinBtn.className = 'pin-btn';
    pinBtn.textContent = 'üìå Pin';
    pinBtn.addEventListener('click', () => {
      pinBtn.textContent = 'Pinned ‚úì';
      pinBtn.style.filter = 'brightness(1.05)';
    });

    card.appendChild(img);
    card.appendChild(badge);
    card.appendChild(pinBtn);
    pinContainer.appendChild(card);
    hideEmpty();
  }

  // Build a Source URL (no API key, no CORS issues)
  function unsplashSource(query){
    // sig busts cache so we get multiple different results
    return `https://source.unsplash.com/600x800/?${encodeURIComponent(query)}&sig=${Math.random()}`;
  }

  // Search flow (no JSON; we directly place <img> with source URLs)
  async function searchImages(query){
    if(!query){ return; }
    clearGrid();
    // Create 12 images for a nice grid
    for(let i=0;i<12;i++){
      const url = unsplashSource(query + (i%3===0 ? ", aesthetic" : ""));
      addPin(url, query);
    }
  }

  // ---------- Events ----------
  addPinButton.addEventListener('click', showModal);
  closeBtn.addEventListener('click', hideModal);
  addPinModal.addEventListener('click', (e)=>{ if(e.target===addPinModal) hideModal(); });

  // Add by URL (FORM SUBMIT ‚Äî important!)
  addPinForm.addEventListener('submit', (e)=>{
    e.preventDefault();
    const input = document.getElementById('pinUrlInput');
    const url = (input.value || "").trim();
    if(url){
      addPin(url, "Custom");
      input.value = "";
      hideModal();
    }
  });

  // Search (FORM SUBMIT)
  searchForm.addEventListener('submit', (e)=>{
    e.preventDefault();
    const q = searchInput.value.trim();
    if(q){ searchImages(q); }
  });

  // Upload from device
  uploadInput.addEventListener('change', (e)=>{
    const file = e.target.files && e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = (ev)=> addPin(ev.target.result, "Upload");
    reader.readAsDataURL(file);
    // reset so same file can be uploaded again later
    uploadInput.value = "";
  });

  // Optional: load a pleasant default
  searchImages("nature");
});
</script>
</body>
      </html>
